{% extends 'base.html' %}

{% block title %}{{ current_user.username }}'s Dashboard{% endblock %}

{% block css %}
<link href="{{ url_for('static', filename='base.css') }}" rel="stylesheet">
<link href="{{ url_for('static', filename='signup.css') }}" rel="stylesheet">
<link href="{{ url_for('static', filename='index.css') }}" rel="stylesheet">
{% endblock %}

{% block content %}
{% include 'includes/delete_modal.html' %}

<h1>Welcome to your Dashboard, {{ current_user.username }}!</h1>
<h3>You have successfully logged in. Now you can buy what you want!</h3>
<p>Email: {{ current_user.email }}</p>
<p>Phone Number: {{ current_user.phone }}</p>
<p>Date of Birth: {{ current_user.dob }}</p>
<p>You have: {{ current_user.prettier_budget }} in your wallet.</p>

<h1 style="margin-bottom: 10px;">Your pending orders!</h1>
{% if ordered_items %}

    <div id="main-container">
        {% for item in ordered_items %}
        {% include 'includes/item_modal.html' %}
        {% set product = item['product'] %}
        <div id="product-card">
            <img alt="{{ product.title }}" src="{{ product.image }}">
            <h3>{{ product.title[:30] + '...' }}</h3>
            <p>{{ product.description[:50] + '...' }}</p>
            <p>Quantity: {{ item['quantity'] }}</p>
            <p>Price: ${{ product.price }}</p>
            <button class="orderbtn" data-toggle="modal" data-target="#Modal-MoreInfo{{ product.id }}">More Info</button>
        </div>
        {% endfor %}
    </div>
{% else %}
    <h4>You haven't ordered any product yet.</h4>
{% endif %}

<button class="dashboard-button" style="margin-top: 10px;"><a href="{{ url_for('market') }}">Home</a></button>
<button class="dashboard-button" data-toggle="modal" data-target="#Modal-DeleteAccount{{ current_user.username }}">Delete my account</button>
<button class="dashboard-button"><a href="{{ url_for('update_info') }}">Update my Info</a></button>
<button class="dashboard-button"><a href="{{ url_for('change_password') }}">Change password</a></button>

{% endblock %}
